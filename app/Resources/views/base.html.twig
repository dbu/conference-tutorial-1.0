<!doctype html>
<html lang="{{ app.request.locale }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ 'site.description'|trans }}">

    <title>{% block title %}{{ 'site.title'|trans }}{% endblock %}</title>

    <link rel="stylesheet" href="/css/pure-min.css">
    <link rel="stylesheet" href="/css/marketing.css">
    <link rel="stylesheet" href="/bundles/dbuconference/css/style.css">
    {% include "CmfCreateBundle::includecssfiles.html.twig" %}
</head>

<body {% if is_granted('ROLE_ADMIN') %}class="admin"{% endif %}>
<div id="body">
    {% block header %}
        <div class="header">
            <div class="pure-menu pure-menu-open pure-menu-fixed pure-menu-horizontal">
                <a class="pure-menu-heading" href="{{ path('/cms/simple') }}">{{ 'site.slogan'|trans }}</a>

                {{ knp_menu_render('simple') }}

                <ul class="user-control">
                {% if is_granted('ROLE_USER') %}
                    <li><a href="{{ path('sonata_admin_dashboard') }}">Admin</a></li>
                    <li> <a href="{{ path('logout') }}">Logout</a></li>
                {% else %}
                    <li><a href="{{ path('login') }}">Login</a></li>
                {% endif %}
                </ul>

                {{ locale_switcher(null, null, '::switcher_links.html.twig') }}

            </div>
        </div>
    {% endblock %}

    {% for flashMessage in app.session.flashbag.get('notice') %}
        <div class="l-box ribbon flash-notice">
            {{ flashMessage }}
        </div>
    {% endfor %}

    <div class="pure-g-r content-ribbon">
        <div class="content pure-u-5-6">
            {% block content %}
            {% endblock %}
        </div>

        <div class="sidebar pure-u-1-6">
            {% block sidebar %}
                {% if cmfMainContent is defined and cmfMainContent.additionalInfoBlock is defined and cmfMainContent.additionalInfoBlock %}
                    {{ sonata_block_render(cmfMainContent.additionalInfoBlock) }}
                {% else %}
                    {{ sonata_block_render({'name': '/cms/content/default/additionalInfoBlock'}) }}
                {% endif %}
            {% endblock %}
        </div>
    </div>

    {% block content_footer %}
        <div class="l-box ribbon">
            <h2>{{ 'site.action_attend'|trans }}</h2>
            <a href="{{ path('dbu_conference_subscribe') }}" class="pure-button primary-button">{{ 'site.action_attend_signup'|trans }}</a>
        </div>
    {% endblock %}

    {% block footer %}
        <div class="footer">
            {{ 'site.description'|trans }}
        </div>
    {% endblock %}
</div>

{% render(controller(
    "cmf_create.jsloader.controller:includeJSFilesAction",
    {'_locale': app.request.locale}
)) %}

</body>
</html>
